<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Runway Image to Video</title>
</head>
<body>
  <h2>Generate Video dari Foto</h2>
  
  <input type="file" id="photo" accept="image/*" />
  <button onclick="generateVideo()">Generate</button>

  <p id="status"></p>
  <video id="result" controls style="max-width:400px; display:none;"></video>

  <script>
    async function generateVideo() {
      const file = document.querySelector("#photo").files[0];
      if (!file) return alert("Pilih foto dulu!");

      document.getElementById("status").innerText = "Mengunggah & memproses...";
      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result.split(",")[1];

        const res = await fetch("/api/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            imageBase64: base64,
            prompt: "smooth cinematic zoom",
            duration: 4
          })
        });

        const data = await res.json();
        console.log("Runway Response:", data);

        if (data.output && data.output[0] && data.output[0].url) {
          document.getElementById("status").innerText = "Selesai âœ…";
          const video = document.getElementById("result");
          video.src = data.output[0].url;
          video.style.display = "block";
        } else {
          document.getElementById("status").innerText = "Gagal generate ðŸ˜¢";
        }
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
